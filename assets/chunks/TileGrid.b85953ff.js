var yt=Object.defineProperty;var wt=(t,e,r)=>e in t?yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var B=(t,e,r)=>(wt(t,typeof e!="symbol"?e+"":e,r),r),z=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var h=(t,e,r)=>(z(t,e,"read from private field"),r?r.call(t):e.get(t)),q=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},k=(t,e,r,n)=>(z(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var d=(t,e,r)=>(z(t,e,"access private method"),r);import{d as D,o as b,c as C,_ as tt,g as J,e as _,u as A,t as rt,n as pt,h as nt,F as st,i as ot,j as it,p as Tt,k as St}from"../app.a4c5765d.js";const w=t=>Number.isFinite(t)&&!Number.isNaN(t),$=t=>typeof t=="object"&&t!==null,Ot=t=>typeof t=="function",P=t=>$(t)&&w(t.col)&&w(t.row),qt=t=>$(t)&&w(t.x)&&w(t.y),W=t=>Array.isArray(t)&&w(t[0])&&w(t[1]),Y=(t,e)=>e+t*(e&1)>>1;function bt(t,e){return(t%e+e)%e}const Ht=(t,e)=>bt(t+e,8),L=([t,e,r=-t-e])=>({q:t,r:e,s:r});function R({q:t,r:e,s:r}){const n=w(t),s=w(e),o=w(r);if(n&&s&&o)return{q:t,r:e,s:r};if(n&&s)return{q:t,r:e,s:-t-e};if(n&&o)return{q:t,r:-t-r,s:r};if(s&&o)return{q:-e-r,r:e,s:r};throw new TypeError(`Can't determine three cube coordinates from less than two coordinates. Received: { q: ${t}, r: ${e}, s: ${r} }.`)}var g=(t=>(t.FLAT="FLAT",t.POINTY="POINTY",t))(g||{});function _t(t,e){if($(t)&&t.xRadius>0&&t.yRadius>0)return t;if($(t)&&t.width>0&&t.height>0){const{width:r,height:n}=t;return e===g.POINTY?{xRadius:r/Math.sqrt(3),yRadius:n/2}:{xRadius:r/2,yRadius:n/Math.sqrt(3)}}if(t>0)return{xRadius:t,yRadius:t};throw new TypeError(`Invalid dimensions: ${JSON.stringify(t)}. Dimensions must be expressed as an Ellipse ({ xRadius: number, yRadius: number }), a Rectangle ({ width: number, height: number }) or a number.`)}function Nt(t,e){if(qt(t))return t;if(!e)throw new TypeError(`Supply a bounding box ({ width: number, height: number }). Received: ${JSON.stringify(e)}`);if(t==="topLeft")return{x:e.width*-.5,y:e.height*-.5};throw new TypeError(`Invalid origin: ${JSON.stringify(t)}. Origin must be expressed as a Point ({ x: number, y: number }) or the string 'topLeft'.`)}class et{constructor(e=[0,0]){B(this,"q");B(this,"r");const{q:r,r:n}=F(this,e);this.q=r,this.r=n}static get settings(){const{dimensions:e,orientation:r,origin:n,offset:s}=this.prototype;return{dimensions:e,orientation:r,origin:n,offset:s}}get center(){const{width:e,height:r,x:n,y:s}=this;return{x:e/2-n,y:r/2-s}}get col(){return j(this).col}get corners(){const{orientation:e,width:r,height:n,x:s,y:o}=this;return e===g.POINTY?vt(r,n,s,o):Ct(r,n,s,o)}get dimensions(){return N.dimensions}get height(){const{orientation:e,dimensions:{yRadius:r}}=this;return e===g.POINTY?r*2:r*Math.sqrt(3)}get isFlat(){return this.orientation===g.FLAT}get isPointy(){return this.orientation===g.POINTY}get orientation(){return N.orientation}get origin(){return N.origin}get offset(){return N.offset}get row(){return j(this).row}get width(){const{orientation:e,dimensions:{xRadius:r}}=this;return e===g.POINTY?r*Math.sqrt(3):r*2}get x(){return ct(this).x}get y(){return ct(this).y}get s(){return-this.q-this.r}clone(e=this){return new this.constructor(e)}equals(e){return Rt(this,P(e)?gt(this,e):e)}toString(){return`${this.constructor.name}(${this.q},${this.r})`}translate(e){return At(this,e)}}const N={dimensions:{xRadius:1,yRadius:1},orientation:g.POINTY,origin:{x:0,y:0},offset:-1},vt=(t,e,r,n)=>[{x:r+t*.5,y:n-e*.25},{x:r+t*.5,y:n+e*.25},{x:r,y:n+e*.5},{x:r-t*.5,y:n+e*.25},{x:r-t*.5,y:n-e*.25},{x:r,y:n-e*.5}],Ct=(t,e,r,n)=>[{x:r+t*.25,y:n-e*.5},{x:r+t*.5,y:n},{x:r+t*.25,y:n+e*.5},{x:r-t*.25,y:n+e*.5},{x:r-t*.5,y:n},{x:r-t*.25,y:n-e*.5}];function Pt(t){const{dimensions:e,orientation:r,origin:n,offset:s}={...N,...t};return class extends et{get dimensions(){return _t(e,r)}get orientation(){return r}get origin(){return Nt(n,this)}get offset(){return s}}}function Rt(t,e){if(P(t)&&P(e))return t.col===e.col&&t.row===e.row;if(Object.hasOwn(t,"col")||Object.hasOwn(e,"col"))throw new Error(`Can't compare coordinates where one are offset coordinates. Either pass two offset coordinates or two axial/cube coordinates. Received: ${JSON.stringify(t)} and ${JSON.stringify(e)}`);const r=W(t)?L(t):t,n=W(e)?L(e):e;return r.q===n.q&&r.r===n.r}const Et=(t,e,r)=>({col:t+Y(r,e),row:e}),It=(t,e,r)=>({col:t,row:e+Y(r,t)}),j=({q:t,r:e,offset:r,isPointy:n})=>n?Et(t,e,r):It(t,e,r),ct=({orientation:t,dimensions:{xRadius:e,yRadius:r},origin:{x:n,y:s},q:o,r:i})=>t===g.POINTY?{x:e*Math.sqrt(3)*(o+i/2)-n,y:r*3/2*i-s}:{x:e*3/2*o-n,y:r*Math.sqrt(3)*(i+o/2)-s},lt=(t,e,r)=>{const n=t-Y(r,e),s=e,o=-n-s;return{q:n,r:s,s:o}},dt=(t,e,r)=>{const n=t,s=e-Y(r,t),o=-n-s;return{q:n,r:s,s:o}},gt=({offset:t,orientation:e},{col:r,row:n})=>e===g.POINTY?lt(r,n,t):dt(r,n,t),Q=t=>{const{q:e,r,s:n}=R(t);let s=Math.round(e),o=Math.round(r),i=Math.round(n);const c=Math.abs(e-s),a=Math.abs(r-o),u=Math.abs(n-i);return c>a&&c>u?s=-o-i:a>u?o=-s-i:i=-s-o,{q:s,r:o,s:i}},Mt=({dimensions:{xRadius:t,yRadius:e},origin:r,orientation:n},{x:s,y:o})=>(s+=r.x,o+=r.y,n===g.POINTY?Q({q:Math.sqrt(3)*s/(3*t)-o/(3*e),r:2/3*(o/e)}):Q({q:2/3*(s/t),r:Math.sqrt(3)*o/(3*e)-s/(3*t)}));function F(t,e){return W(e)?L(e):P(e)?gt(t,e):R(e)}function At(t,e){const{q:r,r:n,s}=R(t),{q:o,r:i,s:c}=R(e),a={q:r+o,r:n+i,s:s+c};return t instanceof et?t.clone(a):a}function K(t,e,r){const{q:n,r:s,s:o}=F(t,e),{q:i,r:c,s:a}=F(t,r);return Math.max(Math.abs(n-i),Math.abs(s-c),Math.abs(o-a))}var $t=(t=>(t.CLOCKWISE="CLOCKWISE",t.COUNTERCLOCKWISE="COUNTERCLOCKWISE",t))($t||{}),f=(t=>(t[t.N=0]="N",t[t.NE=1]="NE",t[t.E=2]="E",t[t.SE=3]="SE",t[t.S=4]="S",t[t.SW=5]="SW",t[t.W=6]="W",t[t.NW=7]="NW",t))(f||{});const Wt=[null,{q:1,r:-1},{q:1,r:0},{q:0,r:1},null,{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],Lt=[{q:0,r:-1},{q:1,r:-1},null,{q:1,r:0},{q:0,r:1},{q:-1,r:1},null,{q:-1,r:0}],Ft=({offset:t,q:e,r,col:n,row:s},o)=>{if(o===f.S||o===f.N){const c=o===f.S?s+1:s-1;return lt(n,c,t)}const i=Wt[o];return{q:e+i.q,r:r+i.r}},Yt=({offset:t,q:e,r,col:n,row:s},o)=>{if(o===f.E||o===f.W){const c=o===f.E?n+1:n-1;return dt(c,s,t)}const i=Lt[o];return{q:e+i.q,r:r+i.r}},U=(t,e)=>t.clone(t.isPointy?Ft(t,e):Yt(t,e));function X(t){return Array.isArray(t)?function(r,n){const s=[];let o=n;for(const i of t)for(const c of i(r,o))s.push(o=c);return s}:t}function at(t){return Bt(t)?zt(t):kt(t)}function Bt(t){return t.direction in f}function zt({start:t,direction:e,length:r}){return function(s,o){const i=[];let a=s(t??o);!t&&o&&(a=U(a,e));for(let u=0;u<r;u++)i.push(a),a=U(a,e);return i}}function kt({start:t,stop:e}){return function(n,s){const o=[],i=n(t??s),c=ut(i),a=ut(F(i,e)),u=Jt(c,a),x=K(i,i,e),T=1/Math.max(x,1);let m=!t&&s?1:0;for(m;m<=x;m++){const S=Q(u(T*m));o.push(n(S))}return o}}function ut({q:t,r:e,s:r}){return{q:t+1e-6,r:e+1e-6,s:r+-2e-6}}function Jt(t,e){return r=>{const n=t.q*(1-r)+e.q*r,s=t.r*(1-r)+e.r*r;return{q:n,r:s}}}function jt(t,e,{includeSource:r=!0}={}){return function(s,o){const i=[];for(const c of X(t)(s,o)){r&&i.push(c);for(const a of X(e)(s,c))i.push(a)}return i}}function ae(t,e){return function(n,s){const{width:o,height:i,start:c,direction:a=f.E}=e?Qt(t,e,n()):t,u=c??s??[0,0],x=jt(at({start:u,direction:Ht(a,2),length:i}),at({direction:a,length:o-1}))(n,u);return!c&&s?x.slice(1):x}}function Qt(t,e,{isPointy:r,offset:n}){const{col:s,row:o}=ht(t,r,n),{col:i,row:c}=ht(e,r,n),a=s<i?"A":"B",u=o<c?"A":"B",x=a+u,{swapWidthHeight:T,direction:m}=Kt[x],S=Math.abs(s-i)+1,O=Math.abs(o-c)+1;return{width:T?O:S,height:T?S:O,start:t,direction:m}}function ht(t,e,r){if(P(t))return t;const{q:n,r:s}=W(t)?L(t):R(t);return j({q:n,r:s,isPointy:e,offset:r})}const Kt={AA:{swapWidthHeight:!1,direction:f.E},AB:{swapWidthHeight:!0,direction:f.N},BA:{swapWidthHeight:!0,direction:f.S},BB:{swapWidthHeight:!1,direction:f.W}};var l,p,H,v,E,V,I,Z,M,G;const y=class{constructor(e,r=[]){q(this,H);q(this,E);q(this,I);q(this,M);q(this,l,void 0);q(this,p,new Map);if(e instanceof y){k(this,l,h(e,l)),this.setHexes(e);return}k(this,l,e),this.setHexes(d(this,E,V).call(this,r))}static fromIterable(e){const r=e[Symbol.iterator]().next().value;if(!r)throw new TypeError(`Can't create grid from empty iterable: ${JSON.stringify(e)}`);return new y(r.constructor,e)}static fromJSON({hexSettings:e,coordinates:r},n){if(n){const o=r.map(n),i=o.length>0?o[0].constructor:n({q:0,r:0},0,[{q:0,r:0}]).constructor;return new y(i,o)}const s=Pt(e);return new y(s,r.map(o=>new s(o)))}get size(){return h(this,p).size}get pixelWidth(){if(this.size===0)return 0;const{isPointy:e,width:r}=this.hexPrototype,n=this.toArray(),{0:s,length:o,[o-1]:i}=e?n.sort((c,a)=>a.s-c.s||c.q-a.q):n.sort((c,a)=>c.q-a.q);return i.x-s.x+r}get pixelHeight(){if(this.size===0)return 0;const{isPointy:e,height:r}=this.hexPrototype,n=this.toArray(),{0:s,length:o,[o-1]:i}=e?n.sort((c,a)=>c.r-a.r):n.sort((c,a)=>a.s-c.s||c.r-a.r);return i.y-s.y+r}[Symbol.iterator](){return h(this,p).values()}get hexPrototype(){return h(this,l).prototype}createHex(e){return new(h(this,l))(e)}getHex(e){const r=this.createHex(e);return h(this,p).get(r.toString())}hasHex(e){return h(this,p).has(e.toString())}setHexes(e){for(const r of e){const n=r instanceof et?r:new(h(this,l))(r);d(this,H,v).call(this,n)}return this}filter(e){var n;const r=new y(h(this,l));for(const s of this)e(s)&&d(n=r,H,v).call(n,s);return r}map(e){var n;const r=new y(h(this,l));for(const s of this)d(n=r,H,v).call(n,e(s));return r}traverse(e,{bail:r=!1}={}){var s;const n=new y(h(this,l));for(const o of d(this,E,V).call(this,e)){const i=this.getHex(o);if(i)d(s=n,H,v).call(s,i);else if(r)return n}return n}forEach(e){for(const r of this)e(r);return this}reduce(e,r){if(r===void 0){let s,o,i;for(const c of this)o=i,i=c,o&&(s=e(o,i));return s}let n=r;for(const s of this)n=e(n,s);return n}toArray(){return Array.from(this)}toJSON(){const{dimensions:e,orientation:r,origin:n,offset:s}=this.hexPrototype;return{hexSettings:{dimensions:e,orientation:r,origin:n,offset:s},coordinates:this.toArray()}}toString(){return`${this.constructor.name}(${this.size})`}pointToHex(e,{allowOutside:r=!0}={}){const n=Mt(this.hexPrototype,e),s=this.getHex(n);return r?s??this.createHex(n):s}distance(e,r,{allowOutside:n=!0}={}){if(n)return K(this.hexPrototype,e,r);const s=this.getHex(e),o=this.getHex(r);if(!(!s||!o))return K(this.hexPrototype,s,o)}neighborOf(e,r,{allowOutside:n=!0}={}){const s=U(this.createHex(e),r),o=this.getHex(s);return n?o??s:o}};let ft=y;l=new WeakMap,p=new WeakMap,H=new WeakSet,v=function(e){h(this,p).set(e.toString(),e)},E=new WeakSet,V=function(e){return d(this,I,Z).call(this,e)?d(this,M,G).call(this,e):Array.isArray(e)&&d(this,I,Z).call(this,e[0])?d(this,M,G).call(this,X(e)):e},I=new WeakSet,Z=function(e){return Ot(e)},M=new WeakSet,G=function(e){return e(this.createHex.bind(this))};const Ut=["x1","y1","x2","y2"],Xt=D({__name:"Arrow",props:{from:null,to:null},setup(t){return(e,r)=>(b(),C("line",{x1:t.from.x,y1:t.from.y,x2:t.to.x,y2:t.to.y,"marker-end":"url(#arrow-head)",class:"line"},null,8,Ut))}});const Vt=tt(Xt,[["__scopeId","data-v-f6ab7da3"]]),Zt=["points"],Gt=["x","y","font-size"],Dt=D({__name:"Tile",props:{tile:null,isTraversed:{type:Boolean}},setup(t){const{tile:e,isTraversed:r}=t,n=e.corners.map(({x:o,y:i})=>`${o},${i}`).join(" "),s=J(()=>e.height/4);return(o,i)=>(b(),C("g",{class:pt({"is-traversed":t.isTraversed})},[_("polygon",{points:A(n),class:"polygon"},null,8,Zt),_("text",{x:t.tile.x,y:t.tile.y,"font-size":A(s),class:"coordinates"},[_("tspan",null,rt(t.tile.q)+","+rt(t.tile.r),1)],8,Gt)],2))}});const te=tt(Dt,[["__scopeId","data-v-d238db27"]]),ee=t=>(Tt("data-v-549a522a"),t=t(),St(),t),re=["width","height"],ne=ee(()=>_("defs",null,[_("marker",{id:"arrow-head",markerWidth:"10",markerHeight:"10",refX:"0",refY:"1.5",orient:"auto"},[_("path",{d:"M0,0 L0,3 L2.5,1.5 z",class:"arrow-head"})])],-1)),se=["transform"],oe=D({__name:"TileGrid",props:{grid:null,traversal:null},setup(t){const{grid:e,traversal:r}=t,n=J(()=>`translate(${e.hexPrototype.width/2},${e.hexPrototype.height/2})`),s=J(()=>((r==null?void 0:r.toArray())??[]).reduce((o,i,c,a)=>{const u=a[c+1];if(!u)return o;const{x,y:T}=i,{x:m,y:S}=u,O=Math.atan2(S-T,m-x),xt={x:x+Math.cos(O)*12,y:T+Math.sin(O)*12},mt={x:m-Math.cos(O)*26,y:S-Math.sin(O)*26};return o.concat({from:xt,to:mt})},[]));return(o,i)=>(b(),C("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t.grid.pixelWidth,height:t.grid.pixelHeight,class:"container"},[ne,_("g",{transform:A(n)},[nt(o.$slots,"before",{},void 0,!0),(b(!0),C(st,null,ot(t.grid,c=>{var a;return b(),it(te,{key:c.toString(),tile:c,"is-traversed":(a=t.traversal)==null?void 0:a.hasHex(c)},null,8,["tile","is-traversed"])}),128)),(b(!0),C(st,null,ot(A(s),({from:c,to:a})=>(b(),it(Vt,{from:c,to:a},null,8,["from","to"]))),256)),nt(o.$slots,"default",{},void 0,!0)],8,se)],8,re))}});const ue=tt(oe,[["__scopeId","data-v-549a522a"]]);export{f as D,ft as G,$t as R,ue as T,K as a,jt as b,X as c,Pt as d,w as i,at as l,U as n,ae as r,F as t};
