var xt=Object.defineProperty;var pt=(e,t,r)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Y=(e,t,r)=>(pt(e,typeof t!="symbol"?t+"":t,r),r),B=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var h=(e,t,r)=>(B(e,t,"read from private field"),r?r.call(e):t.get(e)),O=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},z=(e,t,r,s)=>(B(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);var d=(e,t,r)=>(B(e,t,"access private method"),r);import{d as Z,o as q,c as C,_ as D,g as k,k as H,l as yt,t as et,n as wt,r as rt,F as st,G as nt,b as ot,p as Tt,m as _t}from"./framework.fb79f17b.js";const y=e=>Number.isFinite(e)&&!Number.isNaN(e),A=e=>typeof e=="object"&&e!==null,St=e=>typeof e=="function",P=e=>A(e)&&y(e.col)&&y(e.row),Ot=e=>A(e)&&y(e.x)&&y(e.y),$=e=>Array.isArray(e)&&y(e[0])&&y(e[1]),F=(e,t)=>t+e*(t&1)>>1;function qt(e,t){return(e%t+t)%t}const bt=(e,t)=>qt(e+t,8),W=([e,t,r=-e-t])=>({q:e,r:t,s:r});function R({q:e,r:t,s:r}){const s=y(e),n=y(t),o=y(r);if(s&&n&&o)return{q:e,r:t,s:r};if(s&&n)return{q:e,r:t,s:-e-t};if(s&&o)return{q:e,r:-e-r,s:r};if(n&&o)return{q:-t-r,r:t,s:r};throw new TypeError(`Can't determine three cube coordinates from less than two coordinates. Received: { q: ${e}, r: ${t}, s: ${r} }.`)}var g=(e=>(e.FLAT="FLAT",e.POINTY="POINTY",e))(g||{});function Ht(e,t){if(A(e)&&e.xRadius>0&&e.yRadius>0)return e;if(A(e)&&e.width>0&&e.height>0){const{width:r,height:s}=e;return t===g.POINTY?{xRadius:r/Math.sqrt(3),yRadius:s/2}:{xRadius:r/2,yRadius:s/Math.sqrt(3)}}if(e>0)return{xRadius:e,yRadius:e};throw new TypeError(`Invalid dimensions: ${JSON.stringify(e)}. Dimensions must be expressed as an Ellipse ({ xRadius: number, yRadius: number }), a Rectangle ({ width: number, height: number }) or a number.`)}function vt(e,t){if(Ot(e))return e;if(!t)throw new TypeError(`Supply a bounding box ({ width: number, height: number }). Received: ${JSON.stringify(t)}`);if(e==="topLeft")return{x:t.width*-.5,y:t.height*-.5};throw new TypeError(`Invalid origin: ${JSON.stringify(e)}. Origin must be expressed as a Point ({ x: number, y: number }) or the string 'topLeft'.`)}class tt{constructor(t=[0,0]){Y(this,"q");Y(this,"r");const{q:r,r:s}=L(this,t);this.q=r,this.r=s}static get settings(){const{dimensions:t,orientation:r,origin:s,offset:n}=this.prototype;return{dimensions:t,orientation:r,origin:s,offset:n}}get center(){const{width:t,height:r,x:s,y:n}=this;return{x:t/2-s,y:r/2-n}}get col(){return J(this).col}get corners(){const{orientation:t,width:r,height:s,x:n,y:o}=this;return t===g.POINTY?Nt(r,s,n,o):Ct(r,s,n,o)}get dimensions(){return v.dimensions}get height(){const{orientation:t,dimensions:{yRadius:r}}=this;return t===g.POINTY?r*2:r*Math.sqrt(3)}get isFlat(){return this.orientation===g.FLAT}get isPointy(){return this.orientation===g.POINTY}get orientation(){return v.orientation}get origin(){return v.origin}get offset(){return v.offset}get row(){return J(this).row}get width(){const{orientation:t,dimensions:{xRadius:r}}=this;return t===g.POINTY?r*Math.sqrt(3):r*2}get x(){return it(this).x}get y(){return it(this).y}get s(){return-this.q-this.r}clone(t=this){return new this.constructor(t)}equals(t){return Rt(this,P(t)?dt(this,t):t)}toString(){return`${this.constructor.name}(${this.q},${this.r})`}translate(t){return At(this,t)}}const v={dimensions:{xRadius:1,yRadius:1},orientation:g.POINTY,origin:{x:0,y:0},offset:-1},Nt=(e,t,r,s)=>[{x:r+e*.5,y:s-t*.25},{x:r+e*.5,y:s+t*.25},{x:r,y:s+t*.5},{x:r-e*.5,y:s+t*.25},{x:r-e*.5,y:s-t*.25},{x:r,y:s-t*.5}],Ct=(e,t,r,s)=>[{x:r+e*.25,y:s-t*.5},{x:r+e*.5,y:s},{x:r+e*.25,y:s+t*.5},{x:r-e*.25,y:s+t*.5},{x:r-e*.5,y:s},{x:r-e*.25,y:s-t*.5}];function Pt(e){const{dimensions:t,orientation:r,origin:s,offset:n}={...v,...e};return class extends tt{get dimensions(){return Ht(t,r)}get orientation(){return r}get origin(){return vt(s,this)}get offset(){return n}}}function Rt(e,t){if(P(e)&&P(t))return e.col===t.col&&e.row===t.row;if(Object.hasOwn(e,"col")||Object.hasOwn(t,"col"))throw new Error(`Can't compare coordinates where one are offset coordinates. Either pass two offset coordinates or two axial/cube coordinates. Received: ${JSON.stringify(e)} and ${JSON.stringify(t)}`);const r=$(e)?W(e):e,s=$(t)?W(t):t;return r.q===s.q&&r.r===s.r}const Et=(e,t,r)=>({col:e+F(r,t),row:t}),It=(e,t,r)=>({col:e,row:t+F(r,e)}),J=({q:e,r:t,offset:r,isPointy:s})=>s?Et(e,t,r):It(e,t,r),it=({orientation:e,dimensions:{xRadius:t,yRadius:r},origin:{x:s,y:n},q:o,r:i})=>e===g.POINTY?{x:t*Math.sqrt(3)*(o+i/2)-s,y:r*3/2*i-n}:{x:t*3/2*o-s,y:r*Math.sqrt(3)*(i+o/2)-n},ft=(e,t,r)=>{const s=e-F(r,t),n=t,o=-s-n;return{q:s,r:n,s:o}},lt=(e,t,r)=>{const s=e,n=t-F(r,e),o=-s-n;return{q:s,r:n,s:o}},dt=({offset:e,orientation:t},{col:r,row:s})=>t===g.POINTY?ft(r,s,e):lt(r,s,e),Q=e=>{const{q:t,r,s}=R(e);let n=Math.round(t),o=Math.round(r),i=Math.round(s);const a=Math.abs(t-n),c=Math.abs(r-o),u=Math.abs(s-i);return a>c&&a>u?n=-o-i:c>u?o=-n-i:i=-n-o,{q:n,r:o,s:i}},Mt=({dimensions:{xRadius:e,yRadius:t},origin:r,orientation:s},{x:n,y:o})=>(n+=r.x,o+=r.y,s===g.POINTY?Q({q:Math.sqrt(3)*n/(3*e)-o/(3*t),r:2/3*(o/t)}):Q({q:2/3*(n/e),r:Math.sqrt(3)*o/(3*t)-n/(3*e)}));function L(e,t){return $(t)?W(t):P(t)?dt(e,t):R(t)}function At(e,t){const{q:r,r:s,s:n}=R(e),{q:o,r:i,s:a}=R(t),c={q:r+o,r:s+i,s:n+a};return e instanceof tt?e.clone(c):c}function j(e,t,r){const{q:s,r:n,s:o}=L(e,t),{q:i,r:a,s:c}=L(e,r);return Math.max(Math.abs(s-i),Math.abs(n-a),Math.abs(o-c))}var $t=(e=>(e.CLOCKWISE="CLOCKWISE",e.COUNTERCLOCKWISE="COUNTERCLOCKWISE",e))($t||{}),f=(e=>(e[e.N=0]="N",e[e.NE=1]="NE",e[e.E=2]="E",e[e.SE=3]="SE",e[e.S=4]="S",e[e.SW=5]="SW",e[e.W=6]="W",e[e.NW=7]="NW",e))(f||{});const Wt=[null,{q:1,r:-1},{q:1,r:0},{q:0,r:1},null,{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],Lt=[{q:0,r:-1},{q:1,r:-1},null,{q:1,r:0},{q:0,r:1},{q:-1,r:1},null,{q:-1,r:0}],Ft=({offset:e,q:t,r,col:s,row:n},o)=>{if(o===f.S||o===f.N){const a=o===f.S?n+1:n-1;return ft(s,a,e)}const i=Wt[o];return{q:t+i.q,r:r+i.r}},Yt=({offset:e,q:t,r,col:s,row:n},o)=>{if(o===f.E||o===f.W){const a=o===f.E?s+1:s-1;return lt(a,n,e)}const i=Lt[o];return{q:t+i.q,r:r+i.r}},K=(e,t)=>e.clone(e.isPointy?Ft(e,t):Yt(e,t));function U(e){return Array.isArray(e)?function(r,s){const n=[];let o=s;for(const i of e)for(const a of i(r,o))n.push(o=a);return n}:e}function at(e){return Bt(e)?zt(e):kt(e)}function Bt(e){return e.direction in f}function zt({start:e,direction:t,length:r}){return function(n,o){const i=[];let c=n(e??o);!e&&o&&(c=K(c,t));for(let u=0;u<r;u++)i.push(c),c=K(c,t);return i}}function kt({start:e,stop:t}){return function(s,n){const o=[],i=s(e??n),a=ct(i),c=ct(L(i,t)),u=Jt(a,c),m=j(i,i,t),T=1/Math.max(m,1);let x=!e&&n?1:0;for(x;x<=m;x++){const _=Q(u(T*x));o.push(s(_))}return o}}function ct({q:e,r:t,s:r}){return{q:e+1e-6,r:t+1e-6,s:r+-2e-6}}function Jt(e,t){return r=>{const s=e.q*(1-r)+t.q*r,n=e.r*(1-r)+t.r*r;return{q:s,r:n}}}function Qt(e,t,{includeSource:r=!0}={}){return function(n,o){const i=[];for(const a of U(e)(n,o)){r&&i.push(a);for(const c of U(t)(n,a))i.push(c)}return i}}function ce(e,t){return function(s,n){const{width:o,height:i,start:a,direction:c=f.E}=t?jt(e,t,s()):e,u=a??n??[0,0],m=Qt(at({start:u,direction:bt(c,2),length:i}),at({direction:c,length:o-1}))(s,u);return!a&&n?m.slice(1):m}}function jt(e,t,{isPointy:r,offset:s}){const{col:n,row:o}=ut(e,r,s),{col:i,row:a}=ut(t,r,s),c=n<i?"A":"B",u=o<a?"A":"B",m=c+u,{swapWidthHeight:T,direction:x}=Kt[m],_=Math.abs(n-i)+1,S=Math.abs(o-a)+1;return{width:T?S:_,height:T?_:S,start:e,direction:x}}function ut(e,t,r){if(P(e))return e;const{q:s,r:n}=$(e)?W(e):R(e);return J({q:s,r:n,isPointy:t,offset:r})}const Kt={AA:{swapWidthHeight:!1,direction:f.E},AB:{swapWidthHeight:!0,direction:f.N},BA:{swapWidthHeight:!0,direction:f.S},BB:{swapWidthHeight:!1,direction:f.W}};var l,w,b,N,E,X,I,V,M,G;const p=class p{constructor(t,r=[]){O(this,b);O(this,E);O(this,I);O(this,M);O(this,l,void 0);O(this,w,new Map);if(t instanceof p){z(this,l,h(t,l)),this.setHexes(t);return}z(this,l,t),this.setHexes(d(this,E,X).call(this,r))}static fromIterable(t){const r=t[Symbol.iterator]().next().value;if(!r)throw new TypeError(`Can't create grid from empty iterable: ${JSON.stringify(t)}`);return new p(r.constructor,t)}static fromJSON({hexSettings:t,coordinates:r},s){if(s){const o=r.map(s),i=o.length>0?o[0].constructor:s({q:0,r:0},0,[{q:0,r:0}]).constructor;return new p(i,o)}const n=Pt(t);return new p(n,r.map(o=>new n(o)))}get size(){return h(this,w).size}get pixelWidth(){if(this.size===0)return 0;const{isPointy:t,width:r}=this.hexPrototype,s=this.toArray(),{0:n,length:o,[o-1]:i}=t?s.sort((a,c)=>c.s-a.s||a.q-c.q):s.sort((a,c)=>a.q-c.q);return i.x-n.x+r}get pixelHeight(){if(this.size===0)return 0;const{isPointy:t,height:r}=this.hexPrototype,s=this.toArray(),{0:n,length:o,[o-1]:i}=t?s.sort((a,c)=>a.r-c.r):s.sort((a,c)=>c.s-a.s||a.r-c.r);return i.y-n.y+r}[Symbol.iterator](){return h(this,w).values()}get hexPrototype(){return h(this,l).prototype}createHex(t){return new(h(this,l))(t)}getHex(t){const r=this.createHex(t);return h(this,w).get(r.toString())}hasHex(t){return h(this,w).has(t.toString())}setHexes(t){for(const r of t){const s=r instanceof tt?r:new(h(this,l))(r);d(this,b,N).call(this,s)}return this}filter(t){var s;const r=new p(h(this,l));for(const n of this)t(n)&&d(s=r,b,N).call(s,n);return r}map(t){var s;const r=new p(h(this,l));for(const n of this)d(s=r,b,N).call(s,t(n));return r}traverse(t,{bail:r=!1}={}){var n;const s=new p(h(this,l));for(const o of d(this,E,X).call(this,t)){const i=this.getHex(o);if(i)d(n=s,b,N).call(n,i);else if(r)return s}return s}forEach(t){for(const r of this)t(r);return this}reduce(t,r){if(r===void 0){let n,o,i;for(const a of this)o=i,i=a,o&&(n=t(o,i));return n}let s=r;for(const n of this)s=t(s,n);return s}toArray(){return Array.from(this)}toJSON(){const{dimensions:t,orientation:r,origin:s,offset:n}=this.hexPrototype;return{hexSettings:{dimensions:t,orientation:r,origin:s,offset:n},coordinates:this.toArray()}}toString(){return`${this.constructor.name}(${this.size})`}pointToHex(t,{allowOutside:r=!0}={}){const s=Mt(this.hexPrototype,t),n=this.getHex(s);return r?n??this.createHex(s):n}distance(t,r,{allowOutside:s=!0}={}){if(s)return j(this.hexPrototype,t,r);const n=this.getHex(t),o=this.getHex(r);if(!(!n||!o))return j(this.hexPrototype,n,o)}neighborOf(t,r,{allowOutside:s=!0}={}){const n=K(this.createHex(t),r),o=this.getHex(n);return s?o??n:o}};l=new WeakMap,w=new WeakMap,b=new WeakSet,N=function(t){h(this,w).set(t.toString(),t)},E=new WeakSet,X=function(t){return d(this,I,V).call(this,t)?d(this,M,G).call(this,t):Array.isArray(t)&&d(this,I,V).call(this,t[0])?d(this,M,G).call(this,U(t)):t},I=new WeakSet,V=function(t){return St(t)},M=new WeakSet,G=function(t){return t(this.createHex.bind(this))};let ht=p;const Ut=["x1","y1","x2","y2"],Xt=Z({__name:"Arrow",props:{from:{},to:{}},setup(e){return(t,r)=>(q(),C("line",{x1:t.from.x,y1:t.from.y,x2:t.to.x,y2:t.to.y,"marker-end":"url(#arrow-head)",class:"line"},null,8,Ut))}});const Vt=D(Xt,[["__scopeId","data-v-f6ab7da3"]]),Gt=["points"],Zt=["x","y","font-size"],Dt=Z({__name:"Tile",props:{tile:{},isTraversed:{type:Boolean}},setup(e){const{tile:t,isTraversed:r}=e,s=t.corners.map(({x:o,y:i})=>`${o},${i}`).join(" "),n=k(()=>t.height/4);return(o,i)=>(q(),C("g",{class:wt({"is-traversed":o.isTraversed})},[H("polygon",{points:yt(s),class:"polygon"},null,8,Gt),H("text",{x:o.tile.x,y:o.tile.y,"font-size":n.value,class:"coordinates"},[H("tspan",null,et(o.tile.q)+","+et(o.tile.r),1)],8,Zt)],2))}});const te=D(Dt,[["__scopeId","data-v-d238db27"]]),ee=e=>(Tt("data-v-549a522a"),e=e(),_t(),e),re=["width","height"],se=ee(()=>H("defs",null,[H("marker",{id:"arrow-head",markerWidth:"10",markerHeight:"10",refX:"0",refY:"1.5",orient:"auto"},[H("path",{d:"M0,0 L0,3 L2.5,1.5 z",class:"arrow-head"})])],-1)),ne=["transform"],oe=Z({__name:"TileGrid",props:{grid:{},traversal:{}},setup(e){const{grid:t,traversal:r}=e,s=k(()=>`translate(${t.hexPrototype.width/2},${t.hexPrototype.height/2})`),n=k(()=>((r==null?void 0:r.toArray())??[]).reduce((o,i,a,c)=>{const u=c[a+1];if(!u)return o;const{x:m,y:T}=i,{x,y:_}=u,S=Math.atan2(_-T,x-m),gt={x:m+Math.cos(S)*12,y:T+Math.sin(S)*12},mt={x:x-Math.cos(S)*26,y:_-Math.sin(S)*26};return o.concat({from:gt,to:mt})},[]));return(o,i)=>(q(),C("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:o.grid.pixelWidth,height:o.grid.pixelHeight,class:"container"},[se,H("g",{transform:s.value},[rt(o.$slots,"before",{},void 0,!0),(q(!0),C(st,null,nt(o.grid,a=>{var c;return q(),ot(te,{key:a.toString(),tile:a,"is-traversed":(c=o.traversal)==null?void 0:c.hasHex(a)},null,8,["tile","is-traversed"])}),128)),(q(!0),C(st,null,nt(n.value,({from:a,to:c})=>(q(),ot(Vt,{from:a,to:c},null,8,["from","to"]))),256)),rt(o.$slots,"default",{},void 0,!0)],8,ne)],8,re))}});const ue=D(oe,[["__scopeId","data-v-549a522a"]]);export{f as D,ht as G,$t as R,ue as T,j as a,Qt as b,U as c,Pt as d,y as i,at as l,K as n,ce as r,L as t};
